{"version":3,"file":"js/admin/customizer.min.js","mappings":"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","sources":["webpack:///./js/admin/customizer.js"],"sourcesContent":["/* global _wpCustomizeSFGuidedTourSteps */\r\n(function (wp, $) {\r\n  'use strict';\r\n\r\n  if (!wp || !wp.customize) {\r\n    return;\r\n  }\r\n\r\n  // Set up our namespace.\r\n  const api = wp.customize;\r\n\r\n  api.SFGuidedTourSteps = [];\r\n\r\n  if (typeof _wpCustomizeSFGuidedTourSteps !== 'undefined') {\r\n    $.extend(api.SFGuidedTourSteps, _wpCustomizeSFGuidedTourSteps);\r\n  }\r\n\r\n  /**\r\n   * wp.customize.SFGuidedTour\r\n   *\r\n   */\r\n  api.SFGuidedTour = {\r\n    $container: null,\r\n    currentStep: -1,\r\n\r\n    init() {\r\n      this._setupUI();\r\n    },\r\n\r\n    _setupUI() {\r\n      const self = this,\r\n        $wpCustomize = $('body.wp-customizer .wp-full-overlay');\r\n\r\n      this.$container = $('<div/>').addClass('sf-guided-tour');\r\n\r\n      // Add guided tour div\r\n      $wpCustomize.prepend(this.$container);\r\n\r\n      // Add listeners\r\n      this._addListeners();\r\n\r\n      // Initial position\r\n      this.$container\r\n        .css(\r\n          !$('body').hasClass('rtl') ? 'left' : 'right',\r\n          $('#customize-controls').width() + 10 + 'px',\r\n        )\r\n        .on('transitionend', function () {\r\n          self.$container.addClass('sf-loaded');\r\n        });\r\n\r\n      // Show first step\r\n      this._showNextStep();\r\n\r\n      $(document).on(\r\n        'click',\r\n        '.sf-guided-tour-step .sf-nux-button',\r\n        function () {\r\n          self._showNextStep();\r\n          return false;\r\n        },\r\n      );\r\n\r\n      $(document).on(\r\n        'click',\r\n        '.sf-guided-tour-step .sf-guided-tour-skip',\r\n        function () {\r\n          if (self.currentStep === 0) {\r\n            self._hideTour(true);\r\n          } else {\r\n            self._showNextStep();\r\n          }\r\n\r\n          return false;\r\n        },\r\n      );\r\n    },\r\n\r\n    _addListeners() {\r\n      const self = this;\r\n\r\n      api.state('expandedSection').bind(function () {\r\n        self._adjustPosition();\r\n      });\r\n\r\n      api.state('expandedPanel').bind(function () {\r\n        self._adjustPosition();\r\n      });\r\n    },\r\n\r\n    _adjustPosition() {\r\n      const step = this._getCurrentStep();\r\n\r\n      if (!step) {\r\n        return;\r\n      }\r\n\r\n      this.$container.removeClass('sf-inside-section');\r\n\r\n      const expandedSection = api.state('expandedSection').get();\r\n      const expandedPanel = api.state('expandedPanel').get();\r\n\r\n      if (expandedSection && step.section === expandedSection.id) {\r\n        this._moveContainer(\r\n          $(expandedSection.container[1]).find('.customize-section-title'),\r\n        );\r\n        this.$container.addClass('sf-inside-section');\r\n      } else if (expandedSection === false && expandedPanel === false) {\r\n        if (this._isTourHidden()) {\r\n          this._revealTour();\r\n        } else {\r\n          const selector = this._getSelector(step.section);\r\n          this._moveContainer(selector);\r\n        }\r\n      } else {\r\n        this._hideTour();\r\n      }\r\n    },\r\n\r\n    _hideTour(remove) {\r\n      const self = this;\r\n\r\n      // Already hidden?\r\n      if (this._isTourHidden()) {\r\n        return;\r\n      }\r\n\r\n      const containerOffset = this.$container.offset();\r\n\r\n      this.$container.css({\r\n        transform: '',\r\n        top: containerOffset.top,\r\n      });\r\n\r\n      $('body')\r\n        .addClass('sf-exiting')\r\n        .on(\r\n          'animationend.wpcotestheme webkitAnimationEnd.wpcotestheme',\r\n          function () {\r\n            $(this)\r\n              .removeClass('sf-exiting')\r\n              .off(\r\n                'animationend.wpcotestheme webkitAnimationEnd.wpcotestheme',\r\n              )\r\n              .addClass('sf-hidden');\r\n            self.$container.hide();\r\n\r\n            if (typeof remove !== 'undefined' && remove === true) {\r\n              self._removeTour();\r\n            }\r\n          },\r\n        );\r\n    },\r\n\r\n    _revealTour() {\r\n      const self = this;\r\n\r\n      $('body').removeClass('sf-hidden');\r\n\r\n      self.$container.show();\r\n\r\n      const containerOffset = this.$container.offset();\r\n      const offsetTop = parseInt(containerOffset.top, 10);\r\n\r\n      $('body')\r\n        .addClass('sf-entering')\r\n        .on(\r\n          'animationend.wpcotestheme webkitAnimationEnd.wpcotestheme',\r\n          function () {\r\n            $(this)\r\n              .removeClass('sf-entering')\r\n              .off(\r\n                'animationend.wpcotestheme webkitAnimationEnd.wpcotestheme',\r\n              );\r\n\r\n            self.$container.css({\r\n              top: 'auto',\r\n              transform: 'translateY(' + offsetTop + 'px)',\r\n            });\r\n          },\r\n        );\r\n    },\r\n\r\n    _removeTour() {\r\n      this.$container.remove();\r\n    },\r\n\r\n    _closeAllSections() {\r\n      api.section.each(function (section) {\r\n        section.collapse({ duration: 0 });\r\n      });\r\n\r\n      api.panel.each(function (panel) {\r\n        panel.collapse({ duration: 0 });\r\n      });\r\n    },\r\n\r\n    _showNextStep() {\r\n      if (this._isLastStep()) {\r\n        this._hideTour(true);\r\n        return;\r\n      }\r\n\r\n      this._closeAllSections();\r\n\r\n      // Get next step\r\n      const step = this._getNextStep();\r\n\r\n      // Convert line breaks to paragraphs\r\n      step.message = this._lineBreaksToParagraphs(step.message);\r\n\r\n      // Load template\r\n      const template = wp.template('sf-guided-tour-step');\r\n\r\n      this.$container.removeClass('sf-first-step');\r\n\r\n      if (this.currentStep === 0) {\r\n        step.first_step = true;\r\n        this.$container.addClass('sf-first-step');\r\n      }\r\n\r\n      if (this._isLastStep()) {\r\n        step.last_step = true;\r\n        this.$container.addClass('sf-last-step');\r\n      }\r\n\r\n      this._moveContainer(this._getSelector(step.section));\r\n\r\n      this.$container.html(template(step));\r\n    },\r\n\r\n    _moveContainer($selector) {\r\n      const self = this;\r\n\r\n      if (!$selector) {\r\n        return;\r\n      }\r\n\r\n      const position =\r\n        parseInt($selector.offset().top, 10) + $selector.height() / 2 - 44;\r\n\r\n      this.$container\r\n        .addClass('sf-moving')\r\n        .css({\r\n          transform: 'translateY(' + position + 'px)',\r\n        })\r\n        .on('transitionend.wpcotestheme', function () {\r\n          self.$container.removeClass('sf-moving');\r\n          self.$container.off('transitionend.wpcotestheme');\r\n        });\r\n    },\r\n\r\n    _getSelector(pointTo) {\r\n      const sectionOrPanel = api.section(pointTo)\r\n        ? api.section(pointTo)\r\n        : api.panel(pointTo);\r\n\r\n      // Check whether this is a section, panel, or a regular selector\r\n      if (typeof sectionOrPanel !== 'undefined') {\r\n        return $(sectionOrPanel.container[0]);\r\n      }\r\n\r\n      return $(pointTo);\r\n    },\r\n\r\n    _getCurrentStep() {\r\n      return api.SFGuidedTourSteps[this.currentStep];\r\n    },\r\n\r\n    _getNextStep() {\r\n      this.currentStep = this.currentStep + 1;\r\n      return api.SFGuidedTourSteps[this.currentStep];\r\n    },\r\n\r\n    _isTourHidden() {\r\n      return $('body').hasClass('sf-hidden') ? true : false;\r\n    },\r\n\r\n    _isLastStep() {\r\n      return this.currentStep + 1 < api.SFGuidedTourSteps.length ? false : true;\r\n    },\r\n\r\n    _lineBreaksToParagraphs(message) {\r\n      return '<p>' + message.replace('\\n\\n', '</p><p>') + '</p>';\r\n    },\r\n  };\r\n\r\n  $(document).ready(function () {\r\n    api.SFGuidedTour.init();\r\n  });\r\n})(window.wp, jQuery);\r\n"],"names":["wp","$","customize","api","SFGuidedTourSteps","_wpCustomizeSFGuidedTourSteps","extend","SFGuidedTour","$container","currentStep","init","this","_setupUI","self","$wpCustomize","addClass","prepend","_addListeners","css","hasClass","width","on","_showNextStep","document","_hideTour","state","bind","_adjustPosition","step","_getCurrentStep","removeClass","expandedSection","get","expandedPanel","section","id","_moveContainer","container","find","_isTourHidden","_revealTour","selector","_getSelector","remove","containerOffset","offset","transform","top","off","hide","_removeTour","show","offsetTop","parseInt","_closeAllSections","each","collapse","duration","panel","_isLastStep","_getNextStep","message","_lineBreaksToParagraphs","template","first_step","last_step","html","$selector","position","height","pointTo","sectionOrPanel","length","replace","ready","window","jQuery"],"sourceRoot":""}