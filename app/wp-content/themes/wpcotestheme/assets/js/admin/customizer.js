/******/ (() => { // webpackBootstrap
var __webpack_exports__ = {};
/*!********************************!*\
  !*** ./js/admin/customizer.js ***!
  \********************************/
/* global _wpCustomizeSFGuidedTourSteps */
(function (wp, $) {
  'use strict';

  if (!wp || !wp.customize) {
    return;
  } // Set up our namespace.


  var api = wp.customize;
  api.SFGuidedTourSteps = [];

  if (typeof _wpCustomizeSFGuidedTourSteps !== 'undefined') {
    $.extend(api.SFGuidedTourSteps, _wpCustomizeSFGuidedTourSteps);
  }
  /**
   * wp.customize.SFGuidedTour
   *
   */


  api.SFGuidedTour = {
    $container: null,
    currentStep: -1,
    init: function init() {
      this._setupUI();
    },
    _setupUI: function _setupUI() {
      var self = this,
          $wpCustomize = $('body.wp-customizer .wp-full-overlay');
      this.$container = $('<div/>').addClass('sf-guided-tour'); // Add guided tour div

      $wpCustomize.prepend(this.$container); // Add listeners

      this._addListeners(); // Initial position


      this.$container.css(!$('body').hasClass('rtl') ? 'left' : 'right', $('#customize-controls').width() + 10 + 'px').on('transitionend', function () {
        self.$container.addClass('sf-loaded');
      }); // Show first step

      this._showNextStep();

      $(document).on('click', '.sf-guided-tour-step .sf-nux-button', function () {
        self._showNextStep();

        return false;
      });
      $(document).on('click', '.sf-guided-tour-step .sf-guided-tour-skip', function () {
        if (self.currentStep === 0) {
          self._hideTour(true);
        } else {
          self._showNextStep();
        }

        return false;
      });
    },
    _addListeners: function _addListeners() {
      var self = this;
      api.state('expandedSection').bind(function () {
        self._adjustPosition();
      });
      api.state('expandedPanel').bind(function () {
        self._adjustPosition();
      });
    },
    _adjustPosition: function _adjustPosition() {
      var step = this._getCurrentStep();

      if (!step) {
        return;
      }

      this.$container.removeClass('sf-inside-section');
      var expandedSection = api.state('expandedSection').get();
      var expandedPanel = api.state('expandedPanel').get();

      if (expandedSection && step.section === expandedSection.id) {
        this._moveContainer($(expandedSection.container[1]).find('.customize-section-title'));

        this.$container.addClass('sf-inside-section');
      } else if (expandedSection === false && expandedPanel === false) {
        if (this._isTourHidden()) {
          this._revealTour();
        } else {
          var selector = this._getSelector(step.section);

          this._moveContainer(selector);
        }
      } else {
        this._hideTour();
      }
    },
    _hideTour: function _hideTour(remove) {
      var self = this; // Already hidden?

      if (this._isTourHidden()) {
        return;
      }

      var containerOffset = this.$container.offset();
      this.$container.css({
        transform: '',
        top: containerOffset.top
      });
      $('body').addClass('sf-exiting').on('animationend.wpcotestheme webkitAnimationEnd.wpcotestheme', function () {
        $(this).removeClass('sf-exiting').off('animationend.wpcotestheme webkitAnimationEnd.wpcotestheme').addClass('sf-hidden');
        self.$container.hide();

        if (typeof remove !== 'undefined' && remove === true) {
          self._removeTour();
        }
      });
    },
    _revealTour: function _revealTour() {
      var self = this;
      $('body').removeClass('sf-hidden');
      self.$container.show();
      var containerOffset = this.$container.offset();
      var offsetTop = parseInt(containerOffset.top, 10);
      $('body').addClass('sf-entering').on('animationend.wpcotestheme webkitAnimationEnd.wpcotestheme', function () {
        $(this).removeClass('sf-entering').off('animationend.wpcotestheme webkitAnimationEnd.wpcotestheme');
        self.$container.css({
          top: 'auto',
          transform: 'translateY(' + offsetTop + 'px)'
        });
      });
    },
    _removeTour: function _removeTour() {
      this.$container.remove();
    },
    _closeAllSections: function _closeAllSections() {
      api.section.each(function (section) {
        section.collapse({
          duration: 0
        });
      });
      api.panel.each(function (panel) {
        panel.collapse({
          duration: 0
        });
      });
    },
    _showNextStep: function _showNextStep() {
      if (this._isLastStep()) {
        this._hideTour(true);

        return;
      }

      this._closeAllSections(); // Get next step


      var step = this._getNextStep(); // Convert line breaks to paragraphs


      step.message = this._lineBreaksToParagraphs(step.message); // Load template

      var template = wp.template('sf-guided-tour-step');
      this.$container.removeClass('sf-first-step');

      if (this.currentStep === 0) {
        step.first_step = true;
        this.$container.addClass('sf-first-step');
      }

      if (this._isLastStep()) {
        step.last_step = true;
        this.$container.addClass('sf-last-step');
      }

      this._moveContainer(this._getSelector(step.section));

      this.$container.html(template(step));
    },
    _moveContainer: function _moveContainer($selector) {
      var self = this;

      if (!$selector) {
        return;
      }

      var position = parseInt($selector.offset().top, 10) + $selector.height() / 2 - 44;
      this.$container.addClass('sf-moving').css({
        transform: 'translateY(' + position + 'px)'
      }).on('transitionend.wpcotestheme', function () {
        self.$container.removeClass('sf-moving');
        self.$container.off('transitionend.wpcotestheme');
      });
    },
    _getSelector: function _getSelector(pointTo) {
      var sectionOrPanel = api.section(pointTo) ? api.section(pointTo) : api.panel(pointTo); // Check whether this is a section, panel, or a regular selector

      if (typeof sectionOrPanel !== 'undefined') {
        return $(sectionOrPanel.container[0]);
      }

      return $(pointTo);
    },
    _getCurrentStep: function _getCurrentStep() {
      return api.SFGuidedTourSteps[this.currentStep];
    },
    _getNextStep: function _getNextStep() {
      this.currentStep = this.currentStep + 1;
      return api.SFGuidedTourSteps[this.currentStep];
    },
    _isTourHidden: function _isTourHidden() {
      return $('body').hasClass('sf-hidden') ? true : false;
    },
    _isLastStep: function _isLastStep() {
      return this.currentStep + 1 < api.SFGuidedTourSteps.length ? false : true;
    },
    _lineBreaksToParagraphs: function _lineBreaksToParagraphs(message) {
      return '<p>' + message.replace('\n\n', '</p><p>') + '</p>';
    }
  };
  $(document).ready(function () {
    api.SFGuidedTour.init();
  });
})(window.wp, jQuery);
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QjtBQXFRakJWLElBQUFBLHVCQXJRaUIsbUNBcVFPRCxPQXJRUCxFQXFRZ0I7QUFDL0IsYUFBTyxRQUFRQSxPQUFPLENBQUNZLE9BQVIsQ0FBZ0IsTUFBaEIsRUFBd0IsU0FBeEIsQ0FBUixHQUE2QyxNQUFwRDtBQUNEO0FBdlFnQixHQUFuQjtBQTBRQXZFLEVBQUFBLENBQUMsQ0FBQ3FCLFFBQUQsQ0FBRCxDQUFZbUQsS0FBWixDQUFrQixZQUFZO0FBQzVCdEUsSUFBQUEsR0FBRyxDQUFDSSxZQUFKLENBQWlCRyxJQUFqQjtBQUNELEdBRkQ7QUFHRCxDQWpTRCxFQWlTR2dFLE1BQU0sQ0FBQzFFLEVBalNWLEVBaVNjMkUsTUFqU2QsRSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL2FkbWluL2N1c3RvbWl6ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIF93cEN1c3RvbWl6ZVNGR3VpZGVkVG91clN0ZXBzICovXHJcbihmdW5jdGlvbiAod3AsICQpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGlmICghd3AgfHwgIXdwLmN1c3RvbWl6ZSkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgLy8gU2V0IHVwIG91ciBuYW1lc3BhY2UuXHJcbiAgY29uc3QgYXBpID0gd3AuY3VzdG9taXplO1xyXG5cclxuICBhcGkuU0ZHdWlkZWRUb3VyU3RlcHMgPSBbXTtcclxuXHJcbiAgaWYgKHR5cGVvZiBfd3BDdXN0b21pemVTRkd1aWRlZFRvdXJTdGVwcyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICQuZXh0ZW5kKGFwaS5TRkd1aWRlZFRvdXJTdGVwcywgX3dwQ3VzdG9taXplU0ZHdWlkZWRUb3VyU3RlcHMpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogd3AuY3VzdG9taXplLlNGR3VpZGVkVG91clxyXG4gICAqXHJcbiAgICovXHJcbiAgYXBpLlNGR3VpZGVkVG91ciA9IHtcclxuICAgICRjb250YWluZXI6IG51bGwsXHJcbiAgICBjdXJyZW50U3RlcDogLTEsXHJcblxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgdGhpcy5fc2V0dXBVSSgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBfc2V0dXBVSSgpIHtcclxuICAgICAgY29uc3Qgc2VsZiA9IHRoaXMsXHJcbiAgICAgICAgJHdwQ3VzdG9taXplID0gJCgnYm9keS53cC1jdXN0b21pemVyIC53cC1mdWxsLW92ZXJsYXknKTtcclxuXHJcbiAgICAgIHRoaXMuJGNvbnRhaW5lciA9ICQoJzxkaXYvPicpLmFkZENsYXNzKCdzZi1ndWlkZWQtdG91cicpO1xyXG5cclxuICAgICAgLy8gQWRkIGd1aWRlZCB0b3VyIGRpdlxyXG4gICAgICAkd3BDdXN0b21pemUucHJlcGVuZCh0aGlzLiRjb250YWluZXIpO1xyXG5cclxuICAgICAgLy8gQWRkIGxpc3RlbmVyc1xyXG4gICAgICB0aGlzLl9hZGRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAgIC8vIEluaXRpYWwgcG9zaXRpb25cclxuICAgICAgdGhpcy4kY29udGFpbmVyXHJcbiAgICAgICAgLmNzcyhcclxuICAgICAgICAgICEkKCdib2R5JykuaGFzQ2xhc3MoJ3J0bCcpID8gJ2xlZnQnIDogJ3JpZ2h0JyxcclxuICAgICAgICAgICQoJyNjdXN0b21pemUtY29udHJvbHMnKS53aWR0aCgpICsgMTAgKyAncHgnLFxyXG4gICAgICAgIClcclxuICAgICAgICAub24oJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICBzZWxmLiRjb250YWluZXIuYWRkQ2xhc3MoJ3NmLWxvYWRlZCcpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gU2hvdyBmaXJzdCBzdGVwXHJcbiAgICAgIHRoaXMuX3Nob3dOZXh0U3RlcCgpO1xyXG5cclxuICAgICAgJChkb2N1bWVudCkub24oXHJcbiAgICAgICAgJ2NsaWNrJyxcclxuICAgICAgICAnLnNmLWd1aWRlZC10b3VyLXN0ZXAgLnNmLW51eC1idXR0b24nLFxyXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIHNlbGYuX3Nob3dOZXh0U3RlcCgpO1xyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICk7XHJcblxyXG4gICAgICAkKGRvY3VtZW50KS5vbihcclxuICAgICAgICAnY2xpY2snLFxyXG4gICAgICAgICcuc2YtZ3VpZGVkLXRvdXItc3RlcCAuc2YtZ3VpZGVkLXRvdXItc2tpcCcsXHJcbiAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgaWYgKHNlbGYuY3VycmVudFN0ZXAgPT09IDApIHtcclxuICAgICAgICAgICAgc2VsZi5faGlkZVRvdXIodHJ1ZSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLl9zaG93TmV4dFN0ZXAoKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSxcclxuICAgICAgKTtcclxuICAgIH0sXHJcblxyXG4gICAgX2FkZExpc3RlbmVycygpIHtcclxuICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICBhcGkuc3RhdGUoJ2V4cGFuZGVkU2VjdGlvbicpLmJpbmQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuX2FkanVzdFBvc2l0aW9uKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgYXBpLnN0YXRlKCdleHBhbmRlZFBhbmVsJykuYmluZChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5fYWRqdXN0UG9zaXRpb24oKTtcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9hZGp1c3RQb3NpdGlvbigpIHtcclxuICAgICAgY29uc3Qgc3RlcCA9IHRoaXMuX2dldEN1cnJlbnRTdGVwKCk7XHJcblxyXG4gICAgICBpZiAoIXN0ZXApIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuJGNvbnRhaW5lci5yZW1vdmVDbGFzcygnc2YtaW5zaWRlLXNlY3Rpb24nKTtcclxuXHJcbiAgICAgIGNvbnN0IGV4cGFuZGVkU2VjdGlvbiA9IGFwaS5zdGF0ZSgnZXhwYW5kZWRTZWN0aW9uJykuZ2V0KCk7XHJcbiAgICAgIGNvbnN0IGV4cGFuZGVkUGFuZWwgPSBhcGkuc3RhdGUoJ2V4cGFuZGVkUGFuZWwnKS5nZXQoKTtcclxuXHJcbiAgICAgIGlmIChleHBhbmRlZFNlY3Rpb24gJiYgc3RlcC5zZWN0aW9uID09PSBleHBhbmRlZFNlY3Rpb24uaWQpIHtcclxuICAgICAgICB0aGlzLl9tb3ZlQ29udGFpbmVyKFxyXG4gICAgICAgICAgJChleHBhbmRlZFNlY3Rpb24uY29udGFpbmVyWzFdKS5maW5kKCcuY3VzdG9taXplLXNlY3Rpb24tdGl0bGUnKSxcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMuJGNvbnRhaW5lci5hZGRDbGFzcygnc2YtaW5zaWRlLXNlY3Rpb24nKTtcclxuICAgICAgfSBlbHNlIGlmIChleHBhbmRlZFNlY3Rpb24gPT09IGZhbHNlICYmIGV4cGFuZGVkUGFuZWwgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2lzVG91ckhpZGRlbigpKSB7XHJcbiAgICAgICAgICB0aGlzLl9yZXZlYWxUb3VyKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnN0IHNlbGVjdG9yID0gdGhpcy5fZ2V0U2VsZWN0b3Ioc3RlcC5zZWN0aW9uKTtcclxuICAgICAgICAgIHRoaXMuX21vdmVDb250YWluZXIoc2VsZWN0b3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLl9oaWRlVG91cigpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIF9oaWRlVG91cihyZW1vdmUpIHtcclxuICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAvLyBBbHJlYWR5IGhpZGRlbj9cclxuICAgICAgaWYgKHRoaXMuX2lzVG91ckhpZGRlbigpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBjb250YWluZXJPZmZzZXQgPSB0aGlzLiRjb250YWluZXIub2Zmc2V0KCk7XHJcblxyXG4gICAgICB0aGlzLiRjb250YWluZXIuY3NzKHtcclxuICAgICAgICB0cmFuc2Zvcm06ICcnLFxyXG4gICAgICAgIHRvcDogY29udGFpbmVyT2Zmc2V0LnRvcCxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAkKCdib2R5JylcclxuICAgICAgICAuYWRkQ2xhc3MoJ3NmLWV4aXRpbmcnKVxyXG4gICAgICAgIC5vbihcclxuICAgICAgICAgICdhbmltYXRpb25lbmQud2lsbHlkZXZ0aGVtZSB3ZWJraXRBbmltYXRpb25FbmQud2lsbHlkZXZ0aGVtZScsXHJcbiAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcylcclxuICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ3NmLWV4aXRpbmcnKVxyXG4gICAgICAgICAgICAgIC5vZmYoXHJcbiAgICAgICAgICAgICAgICAnYW5pbWF0aW9uZW5kLndpbGx5ZGV2dGhlbWUgd2Via2l0QW5pbWF0aW9uRW5kLndpbGx5ZGV2dGhlbWUnLFxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ3NmLWhpZGRlbicpO1xyXG4gICAgICAgICAgICBzZWxmLiRjb250YWluZXIuaGlkZSgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiByZW1vdmUgIT09ICd1bmRlZmluZWQnICYmIHJlbW92ZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgIHNlbGYuX3JlbW92ZVRvdXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICApO1xyXG4gICAgfSxcclxuXHJcbiAgICBfcmV2ZWFsVG91cigpIHtcclxuICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ3NmLWhpZGRlbicpO1xyXG5cclxuICAgICAgc2VsZi4kY29udGFpbmVyLnNob3coKTtcclxuXHJcbiAgICAgIGNvbnN0IGNvbnRhaW5lck9mZnNldCA9IHRoaXMuJGNvbnRhaW5lci5vZmZzZXQoKTtcclxuICAgICAgY29uc3Qgb2Zmc2V0VG9wID0gcGFyc2VJbnQoY29udGFpbmVyT2Zmc2V0LnRvcCwgMTApO1xyXG5cclxuICAgICAgJCgnYm9keScpXHJcbiAgICAgICAgLmFkZENsYXNzKCdzZi1lbnRlcmluZycpXHJcbiAgICAgICAgLm9uKFxyXG4gICAgICAgICAgJ2FuaW1hdGlvbmVuZC53aWxseWRldnRoZW1lIHdlYmtpdEFuaW1hdGlvbkVuZC53aWxseWRldnRoZW1lJyxcclxuICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKVxyXG4gICAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnc2YtZW50ZXJpbmcnKVxyXG4gICAgICAgICAgICAgIC5vZmYoXHJcbiAgICAgICAgICAgICAgICAnYW5pbWF0aW9uZW5kLndpbGx5ZGV2dGhlbWUgd2Via2l0QW5pbWF0aW9uRW5kLndpbGx5ZGV2dGhlbWUnLFxyXG4gICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBzZWxmLiRjb250YWluZXIuY3NzKHtcclxuICAgICAgICAgICAgICB0b3A6ICdhdXRvJyxcclxuICAgICAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKCcgKyBvZmZzZXRUb3AgKyAncHgpJyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9yZW1vdmVUb3VyKCkge1xyXG4gICAgICB0aGlzLiRjb250YWluZXIucmVtb3ZlKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9jbG9zZUFsbFNlY3Rpb25zKCkge1xyXG4gICAgICBhcGkuc2VjdGlvbi5lYWNoKGZ1bmN0aW9uIChzZWN0aW9uKSB7XHJcbiAgICAgICAgc2VjdGlvbi5jb2xsYXBzZSh7IGR1cmF0aW9uOiAwIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGFwaS5wYW5lbC5lYWNoKGZ1bmN0aW9uIChwYW5lbCkge1xyXG4gICAgICAgIHBhbmVsLmNvbGxhcHNlKHsgZHVyYXRpb246IDAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICBfc2hvd05leHRTdGVwKCkge1xyXG4gICAgICBpZiAodGhpcy5faXNMYXN0U3RlcCgpKSB7XHJcbiAgICAgICAgdGhpcy5faGlkZVRvdXIodHJ1ZSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLl9jbG9zZUFsbFNlY3Rpb25zKCk7XHJcblxyXG4gICAgICAvLyBHZXQgbmV4dCBzdGVwXHJcbiAgICAgIGNvbnN0IHN0ZXAgPSB0aGlzLl9nZXROZXh0U3RlcCgpO1xyXG5cclxuICAgICAgLy8gQ29udmVydCBsaW5lIGJyZWFrcyB0byBwYXJhZ3JhcGhzXHJcbiAgICAgIHN0ZXAubWVzc2FnZSA9IHRoaXMuX2xpbmVCcmVha3NUb1BhcmFncmFwaHMoc3RlcC5tZXNzYWdlKTtcclxuXHJcbiAgICAgIC8vIExvYWQgdGVtcGxhdGVcclxuICAgICAgY29uc3QgdGVtcGxhdGUgPSB3cC50ZW1wbGF0ZSgnc2YtZ3VpZGVkLXRvdXItc3RlcCcpO1xyXG5cclxuICAgICAgdGhpcy4kY29udGFpbmVyLnJlbW92ZUNsYXNzKCdzZi1maXJzdC1zdGVwJyk7XHJcblxyXG4gICAgICBpZiAodGhpcy5jdXJyZW50U3RlcCA9PT0gMCkge1xyXG4gICAgICAgIHN0ZXAuZmlyc3Rfc3RlcCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy4kY29udGFpbmVyLmFkZENsYXNzKCdzZi1maXJzdC1zdGVwJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLl9pc0xhc3RTdGVwKCkpIHtcclxuICAgICAgICBzdGVwLmxhc3Rfc3RlcCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy4kY29udGFpbmVyLmFkZENsYXNzKCdzZi1sYXN0LXN0ZXAnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5fbW92ZUNvbnRhaW5lcih0aGlzLl9nZXRTZWxlY3RvcihzdGVwLnNlY3Rpb24pKTtcclxuXHJcbiAgICAgIHRoaXMuJGNvbnRhaW5lci5odG1sKHRlbXBsYXRlKHN0ZXApKTtcclxuICAgIH0sXHJcblxyXG4gICAgX21vdmVDb250YWluZXIoJHNlbGVjdG9yKSB7XHJcbiAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgaWYgKCEkc2VsZWN0b3IpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHBvc2l0aW9uID1cclxuICAgICAgICBwYXJzZUludCgkc2VsZWN0b3Iub2Zmc2V0KCkudG9wLCAxMCkgKyAkc2VsZWN0b3IuaGVpZ2h0KCkgLyAyIC0gNDQ7XHJcblxyXG4gICAgICB0aGlzLiRjb250YWluZXJcclxuICAgICAgICAuYWRkQ2xhc3MoJ3NmLW1vdmluZycpXHJcbiAgICAgICAgLmNzcyh7XHJcbiAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKCcgKyBwb3NpdGlvbiArICdweCknLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLm9uKCd0cmFuc2l0aW9uZW5kLndpbGx5ZGV2dGhlbWUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICBzZWxmLiRjb250YWluZXIucmVtb3ZlQ2xhc3MoJ3NmLW1vdmluZycpO1xyXG4gICAgICAgICAgc2VsZi4kY29udGFpbmVyLm9mZigndHJhbnNpdGlvbmVuZC53aWxseWRldnRoZW1lJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9nZXRTZWxlY3Rvcihwb2ludFRvKSB7XHJcbiAgICAgIGNvbnN0IHNlY3Rpb25PclBhbmVsID0gYXBpLnNlY3Rpb24ocG9pbnRUbylcclxuICAgICAgICA/IGFwaS5zZWN0aW9uKHBvaW50VG8pXHJcbiAgICAgICAgOiBhcGkucGFuZWwocG9pbnRUbyk7XHJcblxyXG4gICAgICAvLyBDaGVjayB3aGV0aGVyIHRoaXMgaXMgYSBzZWN0aW9uLCBwYW5lbCwgb3IgYSByZWd1bGFyIHNlbGVjdG9yXHJcbiAgICAgIGlmICh0eXBlb2Ygc2VjdGlvbk9yUGFuZWwgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuICQoc2VjdGlvbk9yUGFuZWwuY29udGFpbmVyWzBdKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuICQocG9pbnRUbyk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9nZXRDdXJyZW50U3RlcCgpIHtcclxuICAgICAgcmV0dXJuIGFwaS5TRkd1aWRlZFRvdXJTdGVwc1t0aGlzLmN1cnJlbnRTdGVwXTtcclxuICAgIH0sXHJcblxyXG4gICAgX2dldE5leHRTdGVwKCkge1xyXG4gICAgICB0aGlzLmN1cnJlbnRTdGVwID0gdGhpcy5jdXJyZW50U3RlcCArIDE7XHJcbiAgICAgIHJldHVybiBhcGkuU0ZHdWlkZWRUb3VyU3RlcHNbdGhpcy5jdXJyZW50U3RlcF07XHJcbiAgICB9LFxyXG5cclxuICAgIF9pc1RvdXJIaWRkZW4oKSB7XHJcbiAgICAgIHJldHVybiAkKCdib2R5JykuaGFzQ2xhc3MoJ3NmLWhpZGRlbicpID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgfSxcclxuXHJcbiAgICBfaXNMYXN0U3RlcCgpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFN0ZXAgKyAxIDwgYXBpLlNGR3VpZGVkVG91clN0ZXBzLmxlbmd0aCA/IGZhbHNlIDogdHJ1ZTtcclxuICAgIH0sXHJcblxyXG4gICAgX2xpbmVCcmVha3NUb1BhcmFncmFwaHMobWVzc2FnZSkge1xyXG4gICAgICByZXR1cm4gJzxwPicgKyBtZXNzYWdlLnJlcGxhY2UoJ1xcblxcbicsICc8L3A+PHA+JykgKyAnPC9wPic7XHJcbiAgICB9LFxyXG4gIH07XHJcblxyXG4gICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuICAgIGFwaS5TRkd1aWRlZFRvdXIuaW5pdCgpO1xyXG4gIH0pO1xyXG59KSh3aW5kb3cud3AsIGpRdWVyeSk7XHJcbiJdLCJuYW1lcyI6WyJ3cCIsIiQiLCJjdXN0b21pemUiLCJhcGkiLCJTRkd1aWRlZFRvdXJTdGVwcyIsIl93cEN1c3RvbWl6ZVNGR3VpZGVkVG91clN0ZXBzIiwiZXh0ZW5kIiwiU0ZHdWlkZWRUb3VyIiwiJGNvbnRhaW5lciIsImN1cnJlbnRTdGVwIiwiaW5pdCIsIl9zZXR1cFVJIiwic2VsZiIsIiR3cEN1c3RvbWl6ZSIsImFkZENsYXNzIiwicHJlcGVuZCIsIl9hZGRMaXN0ZW5lcnMiLCJjc3MiLCJoYXNDbGFzcyIsIndpZHRoIiwib24iLCJfc2hvd05leHRTdGVwIiwiZG9jdW1lbnQiLCJfaGlkZVRvdXIiLCJzdGF0ZSIsImJpbmQiLCJfYWRqdXN0UG9zaXRpb24iLCJzdGVwIiwiX2dldEN1cnJlbnRTdGVwIiwicmVtb3ZlQ2xhc3MiLCJleHBhbmRlZFNlY3Rpb24iLCJnZXQiLCJleHBhbmRlZFBhbmVsIiwic2VjdGlvbiIsImlkIiwiX21vdmVDb250YWluZXIiLCJjb250YWluZXIiLCJmaW5kIiwiX2lzVG91ckhpZGRlbiIsIl9yZXZlYWxUb3VyIiwic2VsZWN0b3IiLCJfZ2V0U2VsZWN0b3IiLCJyZW1vdmUiLCJjb250YWluZXJPZmZzZXQiLCJvZmZzZXQiLCJ0cmFuc2Zvcm0iLCJ0b3AiLCJvZmYiLCJoaWRlIiwiX3JlbW92ZVRvdXIiLCJzaG93Iiwib2Zmc2V0VG9wIiwicGFyc2VJbnQiLCJfY2xvc2VBbGxTZWN0aW9ucyIsImVhY2giLCJjb2xsYXBzZSIsImR1cmF0aW9uIiwicGFuZWwiLCJfaXNMYXN0U3RlcCIsIl9nZXROZXh0U3RlcCIsIm1lc3NhZ2UiLCJfbGluZUJyZWFrc1RvUGFyYWdyYXBocyIsInRlbXBsYXRlIiwiZmlyc3Rfc3RlcCIsImxhc3Rfc3RlcCIsImh0bWwiLCIkc2VsZWN0b3IiLCJwb3NpdGlvbiIsImhlaWdodCIsInBvaW50VG8iLCJzZWN0aW9uT3JQYW5lbCIsImxlbmd0aCIsInJlcGxhY2UiLCJyZWFkeSIsIndpbmRvdyIsImpRdWVyeSJdLCJzb3VyY2VSb290IjoiIn0=